<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"changzeyan.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
<meta property="og:type" content="website">
<meta property="og:title" content="YCZ">
<meta property="og:url" content="https://changzeyan.github.io/page/4/index.html">
<meta property="og:site_name" content="YCZ">
<meta property="og:description" content="天空中没有留下翅膀的痕迹，但我已飞过">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ChangzeYan">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://changzeyan.github.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>YCZ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="YCZ" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">YCZ</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">走向内心，寻求超越</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/16/linux/ming-ling/linux-ming-ling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/16/linux/ming-ling/linux-ming-ling/" class="post-title-link" itemprop="url">Linux命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-16 20:06:32" itemprop="dateCreated datePublished" datetime="2020-12-16T20:06:32+08:00">2020-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-06 20:35:12" itemprop="dateModified" datetime="2021-01-06T20:35:12+08:00">2021-01-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="文件vi"><a href="#文件vi" class="headerlink" title="文件vi"></a>文件vi</h1><h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><p>shift+:进入命令模式，在冒号后面写命令。</p>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><pre class=" language-bash"><code class="language-bash">/输入要搜索的字符串或者字符，然后回车 （从前往后找） 
按下n找下一个匹配项
按下N找上一个匹配项
?要搜索的字符串或者字符 （从后往前找）
命令模式下输入:noh 退出查找高亮显示
</code></pre>
<h3 id="批量替换"><a href="#批量替换" class="headerlink" title="批量替换"></a>批量替换</h3><p>文件内全部替换：</p>
<pre class=" language-bash"><code class="language-bash">%s<span class="token comment" spellcheck="true">#abc#def#g（用def替换文件中所有的abc）</span>
</code></pre>
<p>文件内局部替换：<br>把10行到50行内的“abc”全部替换成“def”</p>
<pre class=" language-bash"><code class="language-bash">10,50s<span class="token comment" spellcheck="true">#abc#def#g（如文件内有#，可用/替换,:%s/abc/def/g）</span>
</code></pre>
<p>以上命令如果在g后面再加上c，则会在替换之前显示提示符给用户确认（conform）是否需要替换。 比如：</p>
<pre class=" language-bash"><code class="language-bash">:%s<span class="token comment" spellcheck="true">#linuxidc.com#linuxidc.net#gc</span>
</code></pre>
<h1 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h1><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#查看状态</span>
firewall-cmd --state 
<span class="token comment" spellcheck="true"># 开启防火墙</span>
systemctl start firewalld.service 
<span class="token comment" spellcheck="true"># 关闭防火墙</span>
systemctl stop firewalld.service  
<span class="token comment" spellcheck="true"># 重启</span>
firewall-cmd --reload  

<span class="token comment" spellcheck="true">#禁止firewall开机启动</span>
systemctl disable firewalld.service
<span class="token comment" spellcheck="true">#开机启用 </span>
systemctl <span class="token function">enable</span> firewalld  
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/16/docker/bu-shu-flask-ying-yong-dao-docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/16/docker/bu-shu-flask-ying-yong-dao-docker/" class="post-title-link" itemprop="url">部署Flask应用到Docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-16 13:04:27" itemprop="dateCreated datePublished" datetime="2020-12-16T13:04:27+08:00">2020-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-27 10:04:26" itemprop="dateModified" datetime="2021-01-27T10:04:26+08:00">2021-01-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="导出与项目有关的依赖"><a href="#导出与项目有关的依赖" class="headerlink" title="导出与项目有关的依赖"></a>导出与项目有关的依赖</h1><h2 id="安装pipreqs"><a href="#安装pipreqs" class="headerlink" title="安装pipreqs"></a>安装pipreqs</h2><pre class=" language-bash"><code class="language-bash">pip <span class="token function">install</span> pipreqs
</code></pre>
<h2 id="导出项目依赖包"><a href="#导出项目依赖包" class="headerlink" title="导出项目依赖包"></a>导出项目依赖包</h2><p>进入到项目根目录，如果用conda装的python，需要切换到项目的python环境：</p>
<pre class=" language-bash"><code class="language-bash">activate python36
</code></pre>
<p>然后执行：</p>
<pre class=" language-bash"><code class="language-bash">pipreqs ./
</code></pre>
<p>成功后在项目根目录下生成requirements.txt文件。</p>
<p>如果报下面错误：</p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/flask%E9%83%A8%E7%BD%B2%E5%88%B0docker-%E5%AE%89%E8%A3%85pipreqs.png" alt="安装pipreqs"><br>按照路径提示，修改pipreqs.py文件：<br>将第74行中的</p>
<pre class=" language-py"><code class="language-py">encoding=encoding
改为：
encoding='utf-8'
</code></pre>
<p>再次执行 pipreqs ./</p>
<p>新环境下安装</p>
<pre class=" language-bash"><code class="language-bash">pip <span class="token function">install</span> -r requirements.txt
</code></pre>
<h1 id="编写Dockerfile"><a href="#编写Dockerfile" class="headerlink" title="编写Dockerfile"></a>编写Dockerfile</h1><p>项目目录结构：</p>
<pre class=" language-bash"><code class="language-bash">D:.
│- Dockerfile
│- requirements.txt
│- nltk_data
└─NER
        key_words.txt
        main.py
        __init__.py
</code></pre>
<p>Dockerfile：</p>
<pre class=" language-bash"><code class="language-bash">FROM python:3.6
<span class="token comment" spellcheck="true"># 暴露5001端口</span>
EXPOSE 5001
<span class="token comment" spellcheck="true"># 将NER目录下（不包括NER目录）所有内容复制到 /usr/src/app目录下</span>
ADD  ./NER /usr/src/app
<span class="token comment" spellcheck="true"># 将nltk所需的词典加入到容器的/usr/local/lib/nltk_data目录下</span>
ADD ./nltk_data /usr/local/lib/nltk_data
<span class="token comment" spellcheck="true"># WORKDIR设置将要安装应用程序的默认目录,在Dockerfile中的任何剩余命令执行以及运行容器时，其当前目录都会为这个默认目录</span>
WORKDIR /usr/src/app
<span class="token comment" spellcheck="true"># COPY将文件从你的机器复制到容器文件系统，后面的点就代表上面设置的目录</span>
COPY requirements.txt <span class="token keyword">.</span>
<span class="token comment" spellcheck="true"># 安装依赖</span>
RUN  pip <span class="token function">install</span> -r ./requirements.txt -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com
<span class="token comment" spellcheck="true"># 启动应用</span>
CMD <span class="token punctuation">[</span><span class="token string">"python"</span>,<span class="token string">"/usr/src/app/main.py"</span><span class="token punctuation">]</span>
</code></pre>
<h2 id="copy和add的区别"><a href="#copy和add的区别" class="headerlink" title="copy和add的区别"></a>copy和add的区别</h2><p>COPY指令和ADD指令都可以将主机上的资源复制或加入到容器镜像中，COPY指令和ADD指令的唯一区别在于是否支持从远程URL获取资源。COPY指令只能从执行docker build所在的主机上读取资源并复制到镜像中。而ADD指令还支持通过URL从远程服务器读取资源并复制到镜像中。</p>
<h1 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h1><p>将项目上传到docker服务器，进入工程目录，执行：</p>
<blockquote>
<p>注意：镜像名不能有大写字母</p>
</blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 最后还有一个点</span>
docker build -t org_struct_pre:latest <span class="token keyword">.</span>
<span class="token comment" spellcheck="true"># 如果远程开启了远程访问，在本地可以部署，不用将项目上传至服务器，执行：</span>
docker -H IP:2375 build -t org_struct_pre:latest <span class="token keyword">.</span>
</code></pre>
<p>运行容器：</p>
<pre class=" language-bash"><code class="language-bash">docker run -itd -p 5001:5001 --name org_struct_pre（容器名） org_struct_pre<span class="token punctuation">(</span>镜像名<span class="token punctuation">)</span>
</code></pre>
<p>进入容器：</p>
<pre class=" language-bash"><code class="language-bash">docker <span class="token function">exec</span> -it 7a31796e9cb2 /bin/bash
</code></pre>
<p>进入到/usr/local/lib目录，可以看到所有词典。可以正常使用nltk：</p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/%E9%83%A8%E7%BD%B2flask-docker-nltk.png" alt="容器中使用nltk"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/16/python/python-yu-fa/han-shu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/16/python/python-yu-fa/han-shu/" class="post-title-link" itemprop="url">Python-函数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-16 10:46:54" itemprop="dateCreated datePublished" datetime="2020-12-16T10:46:54+08:00">2020-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-18 16:27:17" itemprop="dateModified" datetime="2020-12-18T16:27:17+08:00">2020-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h1><p>函数参数中 *args 和 **kwargs 都是传参的方式，区别如下：</p>
<p>*args 的返回值是一个元组，准确的说是将传入的参数中不确定的参数以元组的形式保存下来</p>
<p>**kwargs的返回值是一个字典，即，传参时必须以确定的键值对来传入，及以键值对保存下来，用字典方式获取</p>
<pre class=" language-py"><code class="language-py">def test1(x, *args):
    print("x: ", x)
    print('args: ', args)
    return

def test2(x, **kwargs):
    print("x: ", x)
    print('kwargs: ', kwargs)
    return

if __name__ == '__main__':
    test1(1)
    test1(1, 2, 3, 4)
    test2(5)
    test2(1, a=1, b=2, c=3)
</code></pre>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/python%E8%AF%AD%E6%B3%95%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0.png" alt="参数传入"></p>
<h1 id="查看一个对象的方法"><a href="#查看一个对象的方法" class="headerlink" title="查看一个对象的方法"></a>查看一个对象的方法</h1><pre class=" language-py"><code class="language-py">dir([1,2])
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/15/python/web-ying-yong-flask/flask-graphql-de-shi-yong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/15/python/web-ying-yong-flask/flask-graphql-de-shi-yong/" class="post-title-link" itemprop="url">Flask-GraphQL的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-15 22:21:25" itemprop="dateCreated datePublished" datetime="2020-12-15T22:21:25+08:00">2020-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-01 19:00:26" itemprop="dateModified" datetime="2021-02-01T19:00:26+08:00">2021-02-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安装flask"><a href="#安装flask" class="headerlink" title="安装flask"></a>安装flask</h1><pre class=" language-bash"><code class="language-bash">pip <span class="token function">install</span> flask
</code></pre>
<p>其他可能用到的包（非必须）：</p>
<pre class=" language-bash"><code class="language-bash">pip <span class="token function">install</span> sqlalchemy graphene flask-graphql flask-sqlalchemy graphene-sqlalchemy
<span class="token comment" spellcheck="true"># MySQL</span>
pip <span class="token function">install</span> mysqlclient
<span class="token comment" spellcheck="true"># PostgreSQL</span>
pip <span class="token function">install</span> psycopg2-binary
</code></pre>
<h1 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h1><pre class=" language-py"><code class="language-py">from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run()
</code></pre>
<p>打开浏览器访问<a target="_blank" rel="noopener" href="http://127.0.0.1:5000/%EF%BC%8C%E6%B5%8F%E8%A7%88%E9%A1%B5%E9%9D%A2%E4%B8%8A%E5%B0%86%E5%87%BA%E7%8E%B0Hello">http://127.0.0.1:5000/，浏览页面上将出现Hello</a> World!。</p>
<h2 id="Flask打开远程访问"><a href="#Flask打开远程访问" class="headerlink" title="Flask打开远程访问"></a>Flask打开远程访问</h2><blockquote>
<p>部署到服务器(或者docker)的时候一定要打开,否则访问不到服务.</p>
</blockquote>
<pre class=" language-python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> create_app<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># host=0.0.0.0即打开远程访问</span>
    <span class="token comment" spellcheck="true"># 将服务端口改为4704</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">4704</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="Flask结合graphql"><a href="#Flask结合graphql" class="headerlink" title="Flask结合graphql"></a>Flask结合graphql</h1><h2 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h2><pre class=" language-bash"><code class="language-bash">pip <span class="token function">install</span> graphene flask-graphql
</code></pre>
<h2 id="然后编写query-和schema："><a href="#然后编写query-和schema：" class="headerlink" title="然后编写query 和schema："></a>然后编写query 和schema：</h2><pre class=" language-py"><code class="language-py">from flask import Flask
from graphene import ObjectType, String, Schema, Int,Field
from flask_graphql import GraphQLView


class User(ObjectType):
    id = Int()
    name = String()


class Result(ObjectType):
    code = Int()
    msg = String()


class Query(ObjectType):
    # this defines a Field `hello` in our Schema with a single Argument `name`
    hello = String(name=String(default_value="stranger"))
    goodbye = Field(Result)

    # our Resolver method takes the GraphQL context (root, info) as well as
    # Argument (name) for the Field and returns data for the query Response
    # resolve需要加上固定前缀resolve_
    def resolve_hello(root, info, name):
        return f'Hello: &#123;name&#125; !'

    def resolve_goodbye(root, info):
        return Result(1, "success")

    users = List(User, id=Int(required=True))
    user = Field(User, id=Int(required=True))


    def resolve_user(self, info, id):
        """返回单个实例对象"""
        return User(id=id, name='zhangsan')


    def resolve_users(self, info, id):
        """返回列表对象"""
        return [User(id=id, name='lisi')]



schema = Schema(query=Query)


# app = Flask(__name__)
# app.add_url_rule('/graphql', view_func=GraphQLView.as_view('graphql', schema=schema, graphiql=True))


def create_app():
    app = Flask(__name__)
    app.add_url_rule('/graphql', view_func=GraphQLView.as_view('graphql', schema=schema, graphiql=True))

    # Optional, for adding batch query support (used in Apollo-Client)
    # app.add_url_rule('/graphql/batch', view_func=GraphQLView.as_view('graphql', schema=schema, batch=True))

    @app.route("/")
    def hello_world():
        return "Hello World!"

    return app


if __name__ == '__main__':
    app = create_app()
    # 默认端口号5000
    app.run()
    # 指定端口号5001
    # app.run(port=5001)
</code></pre>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>打开：<a target="_blank" rel="noopener" href="http://127.0.0.1:5000/graphql">http://127.0.0.1:5000/graphql</a></p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/flask-graphql-%E8%BF%90%E8%A1%8C.png" alt="graphiql测试"></p>
<h2 id="参数传递和获取"><a href="#参数传递和获取" class="headerlink" title="参数传递和获取"></a>参数传递和获取</h2><p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gaojy/p/11678191.html">详解Python Graphql</a></li>
<li><a target="_blank" rel="noopener" href="https://haofly.net/python-graphql/">Python使用graphene-sqlalchemy提供GraphQL接口</a></li>
</ul>
<pre class=" language-py"><code class="language-py">class NER_RESULT(ObjectType):
    word_list = List(String)


class Query(ObjectType):
    # ner是方法名
    # Feild表示返回一个非基本类型的对象，
    # 第一个参数NER_RESULT表示方法的返回值类型
    # 后面的是方法需要的参数
    ner = Field(NER_RESULT, text=String())

    # 如果需要两个参数:
    # ner = Field(NER_RESULT, id=String(),text=String())

    # 设置传入参数列表，args
    def resolve_ner(self, info, **args):
        text = args['text']
        print(text)
        words = word_tokenize(text)
        print(words)
        key_words = [word.strip() for word in open("key_words.txt", "r", encoding="utf-8").readlines()]
        word_list = []
        ner_result = NER_RESULT(word_list)
        return ner_result
</code></pre>
<p>访问：</p>
<pre class=" language-bash"><code class="language-bash">query<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
     ner<span class="token punctuation">(</span>text:<span class="token string">"When Jobs arrived back at Apple, it had a conventional structure for a company of its size and scope."</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    wordList
  <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
</code></pre>
<h3 id="info参数"><a href="#info参数" class="headerlink" title="info参数"></a>info参数</h3><p>info表示请求的上下文，可以在查询语中添加context：</p>
<pre class=" language-py"><code class="language-py">class Query(ObjectType):
     hello = String(name=String(default_value="gaojy", required=True))
     @staticmethod
     def resolve_hello(root, info, name):
        # 通过info可获取上下文内容
        print(info.context.get('company'))
        return f"hello word -- &#123;name&#125;"


schema = Schema(query=Query, mutation=MyMutations)

if __name__ == '__main__':
    query_string = '''&#123; hello(name:"gaojiayi") &#125;'''
    # 1 execute中添加context
    result = schema.execute(query_string, context=&#123;'company': 'baidu'&#125;)
    print(result.data['hello'])
</code></pre>
<h2 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h2><h3 id="返回基本类型"><a href="#返回基本类型" class="headerlink" title="返回基本类型"></a>返回基本类型</h3><pre class=" language-py"><code class="language-py">class Query(graphene.ObjectType):
    add = graphene.Int(
        description='calculate a + b then return the result.',
        a=graphene.Int(),
        b=graphene.Int())

    @staticmethod
    def resolve_add(obj, info, a=0, b=0, **kwargs):
        return a + b
</code></pre>
<p>请求：</p>
<pre class=" language-bash"><code class="language-bash">requests.post<span class="token punctuation">(</span><span class="token string">'http://localhost:5000/graphql'</span>, json<span class="token operator">=</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    <span class="token string">'query'</span><span class="token keyword">:</span> <span class="token string">'&amp;#123;add(a: 4, b: 5)&amp;#125;'</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;)</span>
</code></pre>
<h3 id="返回列表"><a href="#返回列表" class="headerlink" title="返回列表"></a>返回列表</h3><pre class=" language-py"><code class="language-py">class Query(graphene.ObjectType):
    rand = graphene.List(
        graphene.Int,
        description='get some random numbers from 0 to 100',
        count=graphene.Int(),
    )

    @staticmethod
    def resolve_rand(obj, info, count=1, **kwargs):
        return [random.randint(0, 100) for i in range(count)]
</code></pre>
<h1 id="后台运行-Python脚本"><a href="#后台运行-Python脚本" class="headerlink" title="后台运行 Python脚本"></a>后台运行 Python脚本</h1><pre class=" language-python"><code class="language-python">nohup python <span class="token operator">-</span>u ProductCatDataImport<span class="token punctuation">.</span>py <span class="token operator">></span> out<span class="token punctuation">.</span>log <span class="token number">2</span><span class="token operator">></span><span class="token operator">&amp;</span><span class="token number">1</span> <span class="token operator">&amp;</span>
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/15/python/python-yu-fa/rong-qi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/15/python/python-yu-fa/rong-qi/" class="post-title-link" itemprop="url">Python-容器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-15 21:01:14" itemprop="dateCreated datePublished" datetime="2020-12-15T21:01:14+08:00">2020-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-18 19:16:25" itemprop="dateModified" datetime="2020-12-18T19:16:25+08:00">2020-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="List"><a href="#List" class="headerlink" title="List"></a>List</h1><p>同时遍历 list中的序号和值：</p>
<pre class=" language-py"><code class="language-py">for i, val in enumerate(list):
    print ("序号：%s   值：%s" % (i , val))
</code></pre>
<p>两个列表合并：</p>
<pre class=" language-py"><code class="language-py"># 将list2的内容加到list1中
list1.extend(list2)
</code></pre>
<h1 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h1><p> 获取字典的keySet 和valueSet</p>
<pre class=" language-py"><code class="language-py"># 获取所有键
dict.keys()
# 获取所有值
dict.values()
</code></pre>
<p>添加和获取：</p>
<pre class=" language-py"><code class="language-py"># 如果键不存在于字典中，将会添加键并将值设为default
dict.setdefault(key, default=None)
# 返回指定键的值，如果值不在字典中返回default值
dict.get(key, default=None)
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/15/python/python-yu-fa/wen-jian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/15/python/python-yu-fa/wen-jian/" class="post-title-link" itemprop="url">Python-文件操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-15 20:50:20" itemprop="dateCreated datePublished" datetime="2020-12-15T20:50:20+08:00">2020-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-22 18:02:34" itemprop="dateModified" datetime="2021-04-22T18:02:34+08:00">2021-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h1><pre class=" language-py"><code class="language-py">try:
   # 'w'表示写，'r'表示读，'a'(append)标识追加模式
   my_file=open('file.txt','w')
except Exception as e:
   print(e)

# 可以同时打开多个文件
with open('./data/code.txt', 'r', encoding='utf-8') as read_file,open('./data/write.txt', 'w', encoding='utf-8') as write_file:
    contents=read_file.readlines()
    print(contents)
</code></pre>
<p>一行一行地读用readline()，读取停用词表：</p>
<pre class=" language-py"><code class="language-py">key_words = [word.strip() for word in open("stop_words.txt", "r", encoding="utf-8").readlines()]
</code></pre>
<h1 id="Json"><a href="#Json" class="headerlink" title="Json"></a>Json</h1><p>从文件中加载json：</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">"../config/record.json"</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> load_f<span class="token punctuation">:</span>
   load_dict <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>load_f<span class="token punctuation">)</span>
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/15/python/nlp/nlp-ying-wen-chu-li-gong-ju-nltk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/15/python/nlp/nlp-ying-wen-chu-li-gong-ju-nltk/" class="post-title-link" itemprop="url">nlp-nltk使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-15 19:17:58" itemprop="dateCreated datePublished" datetime="2020-12-15T19:17:58+08:00">2020-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-18 20:12:34" itemprop="dateModified" datetime="2020-12-18T20:12:34+08:00">2020-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Nltk"><a href="#Nltk" class="headerlink" title="Nltk"></a>Nltk</h1><h2 id="安装nltk"><a href="#安装nltk" class="headerlink" title="安装nltk"></a>安装nltk</h2><pre class=" language-py"><code class="language-py">pip install nltk
</code></pre>
<p>然后使用的时候报错：</p>
<p>Resource punkt not found. Please use the NLTK Downloader to obtain the resource:<br>&gt;&gt;&gt; import nltk &gt;&gt;&gt; nltk.download(‘punkt’)<br>使用提示代码下载词典：</p>
<pre class=" language-py"><code class="language-py">nltk.download('punkt')
</code></pre>
<p>发现下载不下来，报错：getaddrinfo failed。</p>
<h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39712314/article/details/106173356">nltk_data LookupError</a><br>到：<a target="_blank" rel="noopener" href="http://www.nltk.org/nltk_data/">nltk_data</a>中下载punkt包，然后解压到D:\nltk_data\tokenizers目录下即可。</p>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/eksnew/p/12909814.html">离线安装nltk_data</a></p>
<p>打开<a target="_blank" rel="noopener" href="https://github.com/nltk/nltk_data">Github-nltk_data</a>，将第二个文件夹“packages”下载下来，下载Github文件夹可以用chrome插件：GitZip for github. 右键文件夹右边空白处就可以下载了<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/nlp%E4%BE%9D%E8%B5%96%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-nltk.png" alt="packages文件夹内容"></p>
<p>然后，将packages中的所有内容拷贝到以下目录中任意一个：</p>
<pre class=" language-bash"><code class="language-bash">- <span class="token string">'C:\\Users\\cunzhang/nltk_data'</span>
    - <span class="token string">'D:\\Anaconda\\nltk_data'</span>
    - <span class="token string">'D:\\Anaconda\\share\\nltk_data'</span>
    - <span class="token string">'D:\\Anaconda\\lib\\nltk_data'</span>
    - <span class="token string">'C:\\Users\\cunzhang\\AppData\\Roaming\\nltk_data'</span>
    - <span class="token string">'C:\\nltk_data'</span>
    - <span class="token string">'D:\\nltk_data'</span>
    - <span class="token string">'E:\\nltk_data'</span>
</code></pre>
<p>linux中的目录是：</p>
<pre class=" language-bash"><code class="language-bash">Searched in:
    - <span class="token string">'/home/hadoopcj/nltk_data'</span>
    - <span class="token string">'/usr/share/nltk_data'</span>
    - <span class="token string">'/usr/local/share/nltk_data'</span>
    - <span class="token string">'/usr/lib/nltk_data'</span>
    - <span class="token string">'/usr/local/lib/nltk_data'</span>
    - <span class="token string">'/home/hadoopcj/nltk_data'</span>
    - <span class="token string">''</span>
</code></pre>
<p>然后进入到”D:\nltk_data\tokenizers”目录，<strong>将punkt.zip解压</strong> 即可。</p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/nlp%E4%BE%9D%E8%B5%96%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-nltk-punkt.png" alt="packages文件夹内容"></p>
<h2 id="nltk英文分词"><a href="#nltk英文分词" class="headerlink" title="nltk英文分词"></a>nltk英文分词</h2><pre class=" language-py"><code class="language-py">from nltk import word_tokenize

paragraph = "When Jobs arrived back at Apple, it had a conventional structure for a company of its size and scope. It was divided into business units, each with its own P&L responsibilities."
words = word_tokenize(paragraph)
print(words)
</code></pre>
<h2 id="词性标注"><a href="#词性标注" class="headerlink" title="词性标注"></a>词性标注</h2><p>nltk中的词性：</p>
<table>
<thead>
<tr>
<th>tag</th>
<th>mean</th>
<th>释义</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>CC</td>
<td>Coordinating conjunction</td>
<td>连词</td>
<td>and, or,but, if, while,although</td>
</tr>
<tr>
<td>CD</td>
<td>Cardinal number</td>
<td>数词</td>
<td>twenty-four, fourth, 1991,14:24</td>
</tr>
<tr>
<td>DT</td>
<td>Determiner</td>
<td>限定词</td>
<td>the, a, some, most,every, no</td>
</tr>
<tr>
<td>EX</td>
<td>Existential there</td>
<td>存在量词</td>
<td>there, there’s</td>
</tr>
<tr>
<td>FW</td>
<td>Foreign word</td>
<td>外来词</td>
<td>dolce, ersatz, esprit, quo,maitre</td>
</tr>
<tr>
<td>IN</td>
<td>Preposition or subordinating conjunction</td>
<td>介词连词</td>
<td>on, of,at, with,by,into, under</td>
</tr>
<tr>
<td>JJ</td>
<td>Adjective</td>
<td>形容词</td>
<td>new,good, high, special, big, local</td>
</tr>
<tr>
<td>JJR</td>
<td>Adjective, comparative</td>
<td>比较级词语</td>
<td>bleaker braver breezier briefer brighter brisker</td>
</tr>
<tr>
<td>JJS</td>
<td>Adjective, superlative</td>
<td>最高级词语</td>
<td>calmest cheapest choicest classiest cleanest clearest</td>
</tr>
<tr>
<td>LS</td>
<td>List item marker</td>
<td>标记</td>
<td>A A. B B. C C. D E F First G H I J K</td>
</tr>
<tr>
<td>MD</td>
<td>Modal</td>
<td>情态动词</td>
<td>can cannot could couldn’t</td>
</tr>
<tr>
<td>NN</td>
<td>Noun, singular or mass</td>
<td>名词</td>
<td>year,home, costs, time, education</td>
</tr>
<tr>
<td>NNS</td>
<td>Noun, plural</td>
<td>名词复数</td>
<td>undergraduates scotches</td>
</tr>
<tr>
<td>NNP</td>
<td>Proper noun, singular</td>
<td>专有名词</td>
<td>Alison,Africa,April,Washington</td>
</tr>
<tr>
<td>NNPS</td>
<td>Proper noun, plural</td>
<td>专有名词复数</td>
<td>Americans Americas Amharas Amityvilles</td>
</tr>
<tr>
<td>PDT</td>
<td>Predeterminer</td>
<td>前限定词</td>
<td>all both half many</td>
</tr>
<tr>
<td>POS</td>
<td>Possessive ending</td>
<td>所有格标记</td>
<td>’ ‘s</td>
</tr>
<tr>
<td>PRP</td>
<td>Personal pronoun</td>
<td>人称代词</td>
<td>hers herself him himself hisself</td>
</tr>
<tr>
<td>PRP$</td>
<td>Possessive pronoun</td>
<td>所有格</td>
<td>her his mine my our ours</td>
</tr>
<tr>
<td>RB</td>
<td>Adverb</td>
<td>副词</td>
<td>occasionally unabatingly maddeningly</td>
</tr>
<tr>
<td>RBR</td>
<td>Adverb, comparative</td>
<td>副词比较级</td>
<td>further gloomier grander</td>
</tr>
<tr>
<td>RBS</td>
<td>Adverb, superlative</td>
<td>副词最高级</td>
<td>best biggest bluntest earliest</td>
</tr>
<tr>
<td>RP</td>
<td>Particle</td>
<td>虚词</td>
<td>aboard about across along apart</td>
</tr>
<tr>
<td>SYM</td>
<td>Symbol</td>
<td>符号</td>
<td>% &amp; ’ ” ”. ) )</td>
</tr>
<tr>
<td>TO</td>
<td>to</td>
<td>词to</td>
<td>to</td>
</tr>
<tr>
<td>UH</td>
<td>Interjection</td>
<td>感叹词</td>
<td>Goodbye Goody Gosh Wow</td>
</tr>
<tr>
<td>VB</td>
<td>Verb, base form</td>
<td>动词</td>
<td>ask assemble assess</td>
</tr>
<tr>
<td>VBD</td>
<td>Verb, past tense</td>
<td>动词过去式</td>
<td>dipped pleaded swiped</td>
</tr>
<tr>
<td>VBG</td>
<td>Verb, gerund or present participle</td>
<td>动词现在分词</td>
<td>telegraphing stirring focusing</td>
</tr>
<tr>
<td>VBN</td>
<td>Verb, past participle</td>
<td>动词过去分词</td>
<td>multihulled dilapidated aerosolized</td>
</tr>
<tr>
<td>VBP</td>
<td>Verb, non-3rd person singular present</td>
<td>动词现在式非第三人称时态</td>
<td>predominate wrap resort sue</td>
</tr>
<tr>
<td>VBZ</td>
<td>Verb, 3rd person singular present</td>
<td>动词现在式第三人称时态</td>
<td>bases reconstructs marks</td>
</tr>
<tr>
<td>WDT</td>
<td>Wh-determiner</td>
<td>Wh限定词</td>
<td>who,which,when,what,where,how</td>
</tr>
<tr>
<td>WP</td>
<td>Wh-pronoun</td>
<td>WH代词</td>
<td>that what whatever</td>
</tr>
<tr>
<td>WP$</td>
<td>Possessive wh-pronoun</td>
<td>WH代词所有格</td>
<td>whose</td>
</tr>
<tr>
<td>WRB</td>
<td>Wh-adverb</td>
<td>WH副词</td>
<td></td>
</tr>
</tbody></table>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 分词后的词列表</span>
paragraph<span class="token operator">=</span><span class="token string">'When Jobs arrived back at Apple, it had a conventional structure for a company of its size and scope. It was divided into business units,'</span>
words <span class="token operator">=</span> word_tokenize<span class="token punctuation">(</span>paragraph<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># 词性标注</span>
pos_tag <span class="token operator">=</span> nltk<span class="token punctuation">.</span>pos_tag<span class="token punctuation">(</span>words<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pos_tag<span class="token punctuation">)</span>
</code></pre>
<p>获取一个词的词性也得用列表：</p>
<pre class=" language-py"><code class="language-py">t=nltk.pos_tag(['news'])
print(t)
</code></pre>
<h1 id="Nltk的语料库"><a href="#Nltk的语料库" class="headerlink" title="Nltk的语料库"></a>Nltk的语料库</h1><p>语料库在D:\nltk_data\corpora下：</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/itdyb/p/5899616.html">NLTK文本语料库</a></p>
<ul>
<li>古腾堡语料库：gutenberg，包含古腾堡项目电子文本档案的一小部分文本。该项目目前大约有36000本免费的电子图书。</li>
<li>网络聊天语料库：webtext、nps_chat；这部分代表的是非正式的语言，包括Firefox交流论坛、在纽约无意听到的对话、《加勒比海盗》电影剧本。个人广告以及葡萄酒的评论。</li>
<li>布朗语料库：brown；布朗语意库是第一个百万词集的英语电子语料库，有布朗大学于1961年创建，包含500多个不同来源的文本，按照文本类型，如新闻、社评等分类。布朗语料库是一个研究文体之间系统性差异的资源。</li>
<li>路透社语料库：reuters；路透社语料库包括10788个新闻文档，共计130万字。这些文档分成了90个主题，按照‘训练’和‘测试’分为两组。因此，编号为‘test/14826’的文档属于测试组。这样分割是为了方便运用训练和测试算法的自动检验文档的主题。</li>
<li>就职演说语料库：inaugural；是55个文本的集合，每个文本都是一个总统的演讲。这个集合的显著特征就是时间维度。</li>
<li>标注文本语料库和其他语言语料库</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/15/python/conda/conda-ming-ling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/15/python/conda/conda-ming-ling/" class="post-title-link" itemprop="url">Conda 命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-15 13:24:09" itemprop="dateCreated datePublished" datetime="2020-12-15T13:24:09+08:00">2020-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-06 09:57:07" itemprop="dateModified" datetime="2021-09-06T09:57:07+08:00">2021-09-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h1><h2 id="指定下载源"><a href="#指定下载源" class="headerlink" title="指定下载源"></a>指定下载源</h2><p>pip install xxx Could not fetch URL <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple/pipenv/">https://pypi.tuna.tsinghua.edu.cn/simple/pipenv/</a><br>解决，常用的镜像地址有：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 阿里云</span>
http://mirrors.aliyun.com/pypi/simple/
<span class="token comment" spellcheck="true"># 中国科技大学</span>
https://pypi.mirrors.ustc.edu.cn/simple/
<span class="token comment" spellcheck="true"># 豆瓣</span>
http://pypi.douban.com/simple/
<span class="token comment" spellcheck="true"># 清华大学</span>
https://pypi.tuna.tsinghua.edu.cn/simple/
<span class="token comment" spellcheck="true"># 中国科学技术大学</span>
http://pypi.mirrors.ustc.edu.cn/simple/
</code></pre>
<p>安装时指定下载源：</p>
<pre class=" language-bash"><code class="language-bash">pip <span class="token function">install</span> xxx -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com
</code></pre>
<h2 id="指定安装包的版本"><a href="#指定安装包的版本" class="headerlink" title="指定安装包的版本"></a>指定安装包的版本</h2><pre class=" language-py"><code class="language-py"># 安装
conda install numpy=1.9.3
# 更新
conda update numpy=1.9.3
</code></pre>
<h1 id="查看虚拟环境"><a href="#查看虚拟环境" class="headerlink" title="查看虚拟环境"></a>查看虚拟环境</h1><pre class=" language-bash"><code class="language-bash">conda info --envs
</code></pre>
<p>创建python环境:</p>
<p>先在conda中创建一个名为python2的环境，并下载对应版本python2.7</p>
<pre class=" language-bash"><code class="language-bash">conda create --name python27 python<span class="token operator">=</span>2.7

或
conda create -n python36 python<span class="token operator">=</span>3.6.6
conda create -n yourenvname python<span class="token operator">=</span>x.x anaconda <span class="token punctuation">(</span>还会创建与python版本有关的anaconda打包库<span class="token punctuation">)</span>
</code></pre>
<p>激活（切换）python环境</p>
<pre><code>activate yourenvname
</code></pre>
<p>退出虚拟环境：<br>deactivate myenv </p>
<p>删除虚拟环境</p>
<pre><code>conda remove -n yourenvname --all
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/14/write/latex/hithesis/hithesis-gong-da-lun-wen-mo-ban/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/14/write/latex/hithesis/hithesis-gong-da-lun-wen-mo-ban/" class="post-title-link" itemprop="url">Hithesis 工大论文模板</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-14 19:58:50" itemprop="dateCreated datePublished" datetime="2020-12-14T19:58:50+08:00">2020-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-05 14:24:58" itemprop="dateModified" datetime="2021-06-05T14:24:58+08:00">2021-06-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Latex/" itemprop="url" rel="index"><span itemprop="name">Latex</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="中期报告"><a href="#中期报告" class="headerlink" title="中期报告"></a>中期报告</h1><h2 id="hithesis"><a href="#hithesis" class="headerlink" title="hithesis"></a>hithesis</h2><p>模板下载地址：<a target="_blank" rel="noopener" href="https://github.com/dustincys/hithesis">hithesis</a></p>
<p>将zip包下载解压，根目录为：</p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/hithesis-zip.png" alt="解压后的目录"></p>
<h3 id="生成样式文件"><a href="#生成样式文件" class="headerlink" title="生成样式文件"></a>生成样式文件</h3><p>然后在根目录下执行（在github项目介绍中）：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># windows:</span>
lualatex hithesis.ins

<span class="token comment" spellcheck="true"># mac/linux</span>
latex hithesis.ins

<span class="token comment" spellcheck="true"># make</span>
<span class="token function">make</span> cls
</code></pre>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/hithesis-%E7%94%9F%E6%88%90%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6.png" alt="生成的样式文件"></p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>生成好格式后，进入到示例文件夹中</p>
<pre class=" language-bash"><code class="language-bash">examples
├── hitart
│   ├── reportplus  %深圳校区博士中期报告
│   └── reports     %除去深圳校区博士中期报告的一校三区本硕博开题、中期报告
└── hitbook
    ├── chinese     %一校三区本硕博毕业论文以及博后出站报告
    └── english     %一校三区本硕博英文版毕业论文
</code></pre>
<p>在hitart/reports目录下执行：</p>
<pre class=" language-bash"><code class="language-bash">xelatex -shell-escape report.tex
bibtex report
xelatex -shell-escape report.tex
xelatex -shell-escape report.tex
</code></pre>
<p>或者用vscode打开该目录，直接执行。</p>
<p>最后生成的开题中期报告格式不太正确：</p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/hithesis-%E4%B8%AD%E6%9C%9F%E6%A0%B7%E5%BC%8F.png" alt="hithesis生成的样式-本部硕士中期"><br>因此换用hithesis-alpha。</p>
<h2 id="windows下使用docker"><a href="#windows下使用docker" class="headerlink" title="windows下使用docker"></a>windows下使用docker</h2><pre><code>第一步，下载tinytex-hithesis镜像，

  docker pull dustincys/tinytex-hithesis:latest
第二步，在hithesis根目录下执行抽取格式

  docker run --rm -i  -v $(pwd):/home/runner dustincys/tinytex-hithesis:latest latex hithesis.ins

  Windows下改为：
  docker run --rm -i  -v D:\Document\Hit\HitThesis\Thesis\hithesis-newVersion-master\hithesis:/home/runner dustincys/tinytex-hithesis:latest latex hithesis.ins

  -v 冒号前面是本地项目路径，后面是容器内路径

第三步，在hithesis毕业论文文件夹hitbook或报告文件夹report下执行以下命令进行编译

  docker run --rm -i  -v $(pwd):/home/runner dustincys/tinytex-hithesis:latest make thesis

    Windows下改为：
  docker run --rm -i  -v D:\Document\Hit\HitThesis\Thesis\hithesis-newVersion-master\hithesis\examples\hitbook\chinese:/home/runner dustincys/tinytex-hithesis:latest make thesis



  docker run --rm -i  -v $(pwd):/home/runner dustincys/tinytex-hithesis:latest make report
或者编译文档

  docker run --rm -i  -v $(pwd):/home/runner dustincys/tinytex-hithesis:latest make doc
</code></pre>
<h2 id="hithesis-alpha"><a href="#hithesis-alpha" class="headerlink" title="hithesis-alpha"></a>hithesis-alpha</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/Regulust/hithesis-alpha#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E">hithesis-alpha</a></p>
<h3 id="生成样式文件-1"><a href="#生成样式文件-1" class="headerlink" title="生成样式文件"></a>生成样式文件</h3><p>同hithesis一样，在根目录下运行：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># windows:</span>
lualatex hithesis.ins

<span class="token comment" spellcheck="true"># mac/linux</span>
latex hithesis.ins
</code></pre>
<h3 id="编译-1"><a href="#编译-1" class="headerlink" title="编译"></a>编译</h3><p>用vscode直接打开根目录，编辑main.tex，修改documentclass的参数：</p>
<pre class=" language-bash"><code class="language-bash">\documentclass<span class="token punctuation">[</span>newtxmath<span class="token operator">=</span>true,newgeometry<span class="token operator">=</span>two,capcenterlast<span class="token operator">=</span>true,
subcapcenterlast<span class="token operator">=</span>true,openright<span class="token operator">=</span>false,absupper<span class="token operator">=</span>true,
type<span class="token operator">=</span>master,stage<span class="token operator">=</span>zhongqi,campus<span class="token operator">=</span>harbin<span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;hithesis&amp;#125;</span>
</code></pre>
<p>生成的样式如下：</p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/hithesis-alpha-%E6%A0%B7%E5%BC%8F.png" alt="hithesis-alpha生成的样式-本部硕士中期"></p>
<h1 id="学位论文"><a href="#学位论文" class="headerlink" title="学位论文"></a>学位论文</h1><p>使用 hithesis的example/hitbook即可。<br>在thesis.tex中修改：</p>
<pre class=" language-bash"><code class="language-bash">\documentclass<span class="token punctuation">[</span>fontset<span class="token operator">=</span>fandol,type<span class="token operator">=</span>master,campus<span class="token operator">=</span>harbin<span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;hithesisbook&amp;#125;</span>
</code></pre>
<h1 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h1><p>以下命令打开官方文档：</p>
<pre class=" language-bash"><code class="language-bash">texdoc hithesis
</code></pre>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>将“文献[x]”中的[x]表示为正常的文本，而不是引用格式上标：</p>
<pre class=" language-bash"><code class="language-bash">\inlinecite<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;key&amp;#125;</span>
</code></pre>
<p>直接用vscode 编译时有时不会产生参考文献，用下面命令编译一遍即可：</p>
<pre class=" language-bash"><code class="language-bash">xelatex -shell-escape thesis.tex
bibtex thesis
xelatex -shell-escape thesis.tex
xelatex -shell-escape thesis.tex
</code></pre>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h3 id="更改标号样式"><a href="#更改标号样式" class="headerlink" title="更改标号样式"></a>更改标号样式</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 使用方括号阿拉伯数字标号</span>
\begin<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;enumerate&amp;#125;[label=&amp;#123;[\arabic*]&amp;#125;] </span>
    \item xxxxx   %<span class="token punctuation">[</span>1<span class="token punctuation">]</span> xxxxx
    \item yyyyyy  %<span class="token punctuation">[</span>2<span class="token punctuation">]</span> yyyyyy
    \item zzzzz   %<span class="token punctuation">[</span>3<span class="token punctuation">]</span> zzzzz
\end<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;enumerate&amp;#125;</span>

<span class="token comment" spellcheck="true"># 使用圆括号阿拉伯数字标号</span>
\begin<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;enumerate&amp;#125;[label=&amp;#123;(\arabic*)&amp;#125;] </span>
    \item xxxxx   %<span class="token punctuation">(</span>1<span class="token punctuation">)</span> xxxxx
    \item yyyyyy  %<span class="token punctuation">(</span>2<span class="token punctuation">)</span> yyyyyy
    \item zzzzz   %<span class="token punctuation">(</span>3<span class="token punctuation">)</span> zzzzz
\end<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;enumerate&amp;#125;</span>
</code></pre>
<p>在\begin{enumerate}[label={[\arabic*]}]后面跟\setlength{\itemsep}{0pt}可以设置当前列表环境里item条目之间的间距。</p>
<p>\arabic可以替换为\roman、\Roman、\Alph 或 \alph来表示小写罗马数字、大写罗马数字、大写字母编号 或 小写字母编号。</p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><h3 id="设置三级目录"><a href="#设置三级目录" class="headerlink" title="设置三级目录"></a>设置三级目录</h3><p>默认的目录只显示两级，在main.tex中设置显示三级目录，在\document{}后添加\setcounter{tocdepth}{3}：</p>
<pre><code>\documentclass[newtxmath=true,newgeometry=two,capcenterlast=true,subcapcenterlast=true,openright=false,absupper=true,type=master,stage=zhongqi,campus=harbin]&#123;hithesis&#125;

% 设置三级目录
\setcounter&#123;tocdepth&#125;&#123;3&#125;
</code></pre>
<h3 id="去掉目录中摘要和第一章之间的空行"><a href="#去掉目录中摘要和第一章之间的空行" class="headerlink" title="去掉目录中摘要和第一章之间的空行"></a>去掉目录中摘要和第一章之间的空行</h3><p>参考：<a target="_blank" rel="noopener" href="https://github.com/dustincys/hithesis/issues/65">issues-目录格式问题</a></p>
<p>在主文件中中设置：</p>
<pre><code>\documentclass[fontset=fandol,type=master,campus=harbin,tocblank=false]&#123;hithesisbook&#125;

% tocblank=true|false
%   含义：目录中第一章之前，是否加一行空白。缺省值为true。
</code></pre>
<h2 id="去掉图表标题中的冒号"><a href="#去掉图表标题中的冒号" class="headerlink" title="去掉图表标题中的冒号"></a>去掉图表标题中的冒号</h2><p>当增加了一些自定义设置后，原来的图表标题可能会发生变化，可以按照下面修改：</p>
<pre><code>\usepackage&#123;caption&#125;
% 设置表格
\captionsetup[table]&#123;labelsep=space&#125;
% 设置图片，skip表示图片和标题之间距离
\captionsetup[figure]&#123;font=small,skip=0pt&#125;
% 全部设置
\captionsetup&#123;font=&#123;small&#125;,labelsep=space&#125;
</code></pre>
<h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="修改输入输出样式"><a href="#修改输入输出样式" class="headerlink" title="修改输入输出样式"></a>修改输入输出样式</h3><p>中文latex模式下，更改Input为输入，更改Output为输出的方法：<strong>在算法内部插入</strong>：</p>
<pre><code>\SetKwInOut&#123;KIN&#125;&#123;输入&#125;
\SetKwInOut&#123;KOUT&#125;&#123;输出&#125;
</code></pre>
<p>例如：</p>
<pre><code>\begin&#123;algorithm&#125;[!ht]
    \SetKwInOut&#123;KIN&#125;&#123;输入&#125;
    \SetKwInOut&#123;KOUT&#125;&#123;输出&#125;
    \caption&#123;xxxx方法&#125;
    \label&#123;department_fun&#125;
    
    \KIN&#123;data,s,dic&#125;
    \KOUT&#123;vec&#125;
    \lIf&#123;s 为空串&#125;&#123;直接返回&#125;
    len$\gets$ s.length()\;
    ss$\gets$s.toCharArray() \;
    dp$\gets$ new boolean[len][len] \;
    ans$\gets$ &quot;&quot;+ss[0] \;
    maxLen$\gets$1 \;
    \For&#123;i from 0 To len&#125;&#123;
        dp[i][i]$\gets$true \;
    &#125;
\end&#123;algorithm&#125;
</code></pre>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><table>
<thead>
<tr>
<th>代码</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>\;</td>
<td>在行末添加分号，并自动换行</td>
</tr>
<tr>
<td>\caption{}</td>
<td>插入标题</td>
</tr>
<tr>
<td>\KwData{输入信息}</td>
<td>效果：“Data:输入信息”</td>
</tr>
<tr>
<td>\KwIn{输入信息}</td>
<td>效果：“Input:输入信息”</td>
</tr>
<tr>
<td>\KwOut{输出信息}</td>
<td>效果：“Output:输出信息”</td>
</tr>
<tr>
<td>\KwResult{输出信息}</td>
<td>效果：“Result:输出信息”</td>
</tr>
<tr>
<td>\tcc{注释}</td>
<td>效果：/* 注释*/</td>
</tr>
<tr>
<td>\tcp{注释}</td>
<td>效果：// 注释</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/10/graphql/graphql-de-shi-yong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/10/graphql/graphql-de-shi-yong/" class="post-title-link" itemprop="url">Graphql的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-12-10 20:20:08 / 修改时间：22:23:54" itemprop="dateCreated datePublished" datetime="2020-12-10T20:20:08+08:00">2020-12-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Graphql/" itemprop="url" rel="index"><span itemprop="name">Graphql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="添加pom依赖"><a href="#添加pom依赖" class="headerlink" title="添加pom依赖"></a>添加pom依赖</h1><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.graphql-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>graphql-java-tools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.2.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mountcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>graphql-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.graphql-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>graphiql-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.graphql-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>graphql-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
</code></pre>
<p>graphiql便于调试接口和查看文档，项目启动后访问：<a href="http://ip:port/graphiql">http://ip:port/graphiql</a></p>
<h1 id="添加Query和Type"><a href="#添加Query和Type" class="headerlink" title="添加Query和Type"></a>添加Query和Type</h1><p>在resources根目录下新建root.graphqls文件和schema.graphqls 文件，名字不可更换</p>
<h2 id="root-graphqls"><a href="#root-graphqls" class="headerlink" title="root.graphqls"></a>root.graphqls</h2><p>root.graphqls中用于定义接口：</p>
<pre class=" language-java"><code class="language-java">type Query<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    # 启动任务
    <span class="token function">startEnterpriseRelationshipAnalyse</span><span class="token punctuation">(</span>module<span class="token operator">:</span>String<span class="token punctuation">,</span>organizationName<span class="token operator">:</span>String<span class="token punctuation">,</span>organizationUrl<span class="token operator">:</span>String<span class="token punctuation">,</span>userId<span class="token operator">:</span>String<span class="token punctuation">)</span><span class="token operator">:</span> StartProcessResult
    # 获取当前正在执行的任务名称
    <span class="token function">currentTask</span><span class="token punctuation">(</span>processInstanceId<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> ProcessCurrentTaskResult

    # 获取所有任务
    <span class="token function">taskList</span><span class="token punctuation">(</span>page<span class="token operator">:</span>Int<span class="token punctuation">,</span> size<span class="token operator">:</span>Int <span class="token punctuation">)</span><span class="token operator">:</span> OrganizationTaskPageResult

    # 获取所有已经完成的任务
    <span class="token function">completedTaskList</span><span class="token punctuation">(</span>page<span class="token operator">:</span>Int<span class="token punctuation">,</span> size<span class="token operator">:</span>Int <span class="token punctuation">)</span><span class="token operator">:</span>OrganizationTaskPageResult
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>在graphqls文件中写的注释会体现在<a href="http://ip:port/graphiql">http://ip:port/graphiql</a> 中的文档上。<br>该文件中定义了4个接口，小括号内是接口需要传入的参数，冒号后面是接口的返回值。</p>
<ul>
<li>Result：返回一个Result的数据类型</li>
<li> [AnalysisJsonResponse]，返回一个 AnalysisJsonResponse类型的列表。</li>
<li>ProcessCurrentTaskResult返回一个ProcessCurrentTaskResult类型</li>
</ul>
<p>Result和 ProcessCurrentTaskResult等类型都在schema.graphqls中定义。</p>
<h2 id="schema-graphqls"><a href="#schema-graphqls" class="headerlink" title="schema.graphqls"></a>schema.graphqls</h2><pre class=" language-java"><code class="language-java">type Result<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    code<span class="token operator">:</span> Int
    msg<span class="token operator">:</span> String
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

type StartProcessResult <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    result<span class="token operator">:</span> Result
    taskId<span class="token operator">:</span> String
    processInstanceId<span class="token operator">:</span> String
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

# 获取当前正在执行的任务名称结果
type ProcessCurrentTaskResult<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    result<span class="token operator">:</span> Result
    processTaskId<span class="token operator">:</span> String
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>


type PageInfo<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    total<span class="token operator">:</span> Int
    current<span class="token operator">:</span> Int
    size<span class="token operator">:</span> Int
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
type OrganizationTaskResult<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    taskId<span class="token operator">:</span> String
    processCode<span class="token operator">:</span>String
    processId<span class="token operator">:</span>String
    userId<span class="token operator">:</span>String
    organizationName<span class="token operator">:</span> String
    organizationUrl<span class="token operator">:</span> String
    module<span class="token operator">:</span> String
    progress<span class="token operator">:</span> String
    status<span class="token operator">:</span> String
    createTime<span class="token operator">:</span> String
    endTime<span class="token operator">:</span> String
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

type OrganizationTaskPageResult<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    # <span class="token punctuation">[</span>OrganizationTaskResult<span class="token punctuation">]</span>表示 OrganizationTaskResult 类型的列表
    list<span class="token operator">:</span> <span class="token punctuation">[</span>OrganizationTaskResult<span class="token punctuation">]</span>
    pageInfo<span class="token operator">:</span> PageInfo
    result<span class="token operator">:</span> Result
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>schema中定义的类型要编写对应的Entity类，方便后面构建对象。</p>
<h1 id="定义Resolver"><a href="#定义Resolver" class="headerlink" title="定义Resolver"></a>定义Resolver</h1><p>在root.graphqls中定义的接口要在resolver中实现，否则会报错。</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> com<span class="token punctuation">.</span>coxautodev<span class="token punctuation">.</span>graphql<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>GraphQLQueryResolver<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>topveda<span class="token punctuation">.</span>cloudactiviti<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>topveda<span class="token punctuation">.</span>cloudactiviti<span class="token punctuation">.</span>service<span class="token punctuation">.</span>EnterpriseRaService<span class="token punctuation">;</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>topveda<span class="token punctuation">.</span>cloudactiviti<span class="token punctuation">.</span>service<span class="token punctuation">.</span>OrganizationTaskService<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Component<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActivitiResolver</span> <span class="token keyword">implements</span> <span class="token class-name">GraphQLQueryResolver</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> EnterpriseRaService enterpriseRaService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> OrganizationTaskService organizationTaskService<span class="token punctuation">;</span>


    <span class="token keyword">public</span> String <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        String deploymentId<span class="token operator">=</span>enterpriseRaService<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> deploymentId<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> StartProcessResult <span class="token function">startEnterpriseRelationshipAnalyse</span><span class="token punctuation">(</span>String module<span class="token punctuation">,</span> String organizationName<span class="token punctuation">,</span> String organizationUrl<span class="token punctuation">,</span> String userId<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//....</span>
        <span class="token keyword">return</span> StartProcessResult<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">taskId</span><span class="token punctuation">(</span>taskId<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processInstanceId</span><span class="token punctuation">(</span>processInstanceId<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>Result<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>


    <span class="token keyword">public</span> ProcessCurrentTaskResult <span class="token function">currentTask</span><span class="token punctuation">(</span>String processInstanceId<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        String currentTaskId<span class="token operator">=</span>enterpriseRaService<span class="token punctuation">.</span><span class="token function">getCurrentTask</span><span class="token punctuation">(</span>processInstanceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ProcessCurrentTaskResult<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>Result<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processTaskId</span><span class="token punctuation">(</span>currentTaskId<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> ProcessLastTaskResult <span class="token function">lastFinishedTask</span><span class="token punctuation">(</span>String processInstanceId<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        String lastFinishedTaskId<span class="token operator">=</span>enterpriseRaService<span class="token punctuation">.</span><span class="token function">getLastFinishedTask</span><span class="token punctuation">(</span>processInstanceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ProcessLastTaskResult<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>Result<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">processTaskId</span><span class="token punctuation">(</span>lastFinishedTaskId<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> OrganizationTaskPageResult <span class="token function">taskList</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> organizationTaskService<span class="token punctuation">.</span><span class="token function">getTaskListByPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 获取所有已经完成的任务</span>
    <span class="token keyword">public</span> OrganizationTaskPageResult <span class="token function">completedTaskList</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> organizationTaskService<span class="token punctuation">.</span><span class="token function">getCompletedTaskListByPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h1 id="调用接口"><a href="#调用接口" class="headerlink" title="调用接口"></a>调用接口</h1><p>运行程序，访问<a href="http://ip:port/graphiql：">http://ip:port/graphiql：</a><br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/graphiql.png" alt="graphiql测试接口"><br>打开右侧的query，会看到接口文档，有接口名称，参数和返回值类型<br>可以根据自己需要的返回值定义访问形式，上图中只返回result的msg属性（<strong>按需返回</strong>），如果需要返回result的code属性，写为：</p>
<pre class=" language-bash"><code class="language-bash">currentTask<span class="token punctuation">(</span>processInstanceId:<span class="token string">"e00ca85a-360e-11eb-9ca6-809599575c52"</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
  result<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    msg
    code
  <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
  processTaskId
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
</code></pre>
<p>然后点击左上角的运行按钮即可运行接口。</p>
<h2 id="返回自定义对象列表"><a href="#返回自定义对象列表" class="headerlink" title="返回自定义对象列表"></a>返回自定义对象列表</h2><p>如果需要返回自定义的对象列表，以上面定义的completedTaskList为例：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
  completedTaskList<span class="token punctuation">(</span>page:1,size:10<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
    list<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
      taskId
      processCode
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
    pageInfo<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
      total
      current
      size
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
    result<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
      code
    <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
  <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/10/docker/bu-shu-springboot-xiang-mu-dao-docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/10/docker/bu-shu-springboot-xiang-mu-dao-docker/" class="post-title-link" itemprop="url">部署springboot项目到docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-12-10 18:22:44 / 修改时间：22:20:31" itemprop="dateCreated datePublished" datetime="2020-12-10T18:22:44+08:00">2020-12-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="idea插件部署"><a href="#idea插件部署" class="headerlink" title="idea插件部署"></a>idea插件部署</h1><h2 id="idea中安装docker插件"><a href="#idea中安装docker插件" class="headerlink" title="idea中安装docker插件"></a>idea中安装docker插件</h2><p>在setting-plugin中搜索并安装docker：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/idea-docker%E6%8F%92%E4%BB%B6.png" alt="安装docker插件"></p>
<h2 id="连接远程docker服务器"><a href="#连接远程docker服务器" class="headerlink" title="连接远程docker服务器"></a>连接远程docker服务器</h2><p>在build，docker中添加一个连接，并填写好服务器ip和端口：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/idea-%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8Bdocker.png" alt="连接远程docker"></p>
<h2 id="将springboot项目打包"><a href="#将springboot项目打包" class="headerlink" title="将springboot项目打包"></a>将springboot项目打包</h2><p>点击上面的skip test按钮，可以跳过测试：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/idea-%E6%89%93%E5%8C%85.png" alt="将项目打成jar包"></p>
<h2 id="编写DockerFile"><a href="#编写DockerFile" class="headerlink" title="编写DockerFile"></a>编写DockerFile</h2><p>DockerFile位置与target文件夹同级目录，DockerFile中的路径是相对路径：</p>
<p> 指定了临时文件目录为/tmp，其效果是在主机 /var/lib/docker 目录下创建了一个临时文件，并链接到容器的/tmp，ENTRYPOINT 执行项目 cloud-activiti.jar。为了缩短 Tomcat 启动时间，添加一个系统属性指向 “/dev/./urandom” 作为 Entropy Source</p>
<pre class=" language-bash"><code class="language-bash">FROM java:8
<span class="token comment" spellcheck="true">#暴露容器的9023端口</span>
EXPOSE 9023
<span class="token comment" spellcheck="true">#将复制指定的cloud-activiti-0.0.1-SNAPSHOT.jar为容器中的cloud-activiti.jar，相当于拷贝到容器中取了个别名</span>
ADD target/cloud-activiti-0.0.1-SNAPSHOT.jar /cloud-activiti.jar

VOLUME /tmp
RUN <span class="token function">bash</span> -c <span class="token string">'touch /cloud-activiti.jar'</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"java"</span>,<span class="token string">"-Djava.security.egd=file:/dev/./urandom"</span>,<span class="token string">"-jar"</span>,<span class="token string">"/cloud-activiti.jar"</span><span class="token punctuation">]</span>
</code></pre>
<h2 id="部署和运行"><a href="#部署和运行" class="headerlink" title="部署和运行"></a>部署和运行</h2><p>点击Edit Configuration：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/%E9%83%A8%E7%BD%B2%E5%92%8C%E6%89%A7%E8%A1%8Cdocker.png" alt="编辑配置"><br>点击左上角加号，“+”：</p>
<p>选择DockerFile：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/docker-files-configuration.png" alt="配置configuration"><br>选择要部署的目标docker服务器，dockerfile文件，端口号，tag等：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/run-configuration.png" alt="部署和运行"><br>然后点击run，即可部署到docker服务器中。</p>
<h1 id="手动部署"><a href="#手动部署" class="headerlink" title="手动部署"></a>手动部署</h1><h2 id="上传Dockerfile和jar包"><a href="#上传Dockerfile和jar包" class="headerlink" title="上传Dockerfile和jar包"></a>上传Dockerfile和jar包</h2><p>将Dockerfile和 jar包上传到docker服务器，注意dockerfile中jar包的路径，决定了Dockerfile和jar包的相对位置。</p>
<h2 id="制作镜像"><a href="#制作镜像" class="headerlink" title="制作镜像"></a>制作镜像</h2><p>执行下面命令， 看好，最后面有个”.”点！</p>
<pre class=" language-bash"><code class="language-bash">docker build -t springbootdemo4docker <span class="token keyword">.</span>
</code></pre>
<p>-t 参数是指定此镜像的tag名</p>
<h2 id="启动镜像"><a href="#启动镜像" class="headerlink" title="启动镜像"></a>启动镜像</h2><p>制作完成后通过docker images命令可以查看制作的镜像，然后启动：</p>
<pre class=" language-bash"><code class="language-bash">docker run -d -p 8080:8085 springbootdemo4docker
</code></pre>
<p>-d参数是让容器后台运行<br>-p 是做端口映射，此时将服务器中的8080端口映射到容器中的8085(项目中端口配置的是8085)端口</p>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><p><a target="_blank" rel="noopener" href="http://docker服务器ip地址:8080/">http://docker服务器ip地址:8080/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://changzeyan.github.io/2020/12/08/windows/windows-cmd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ChangzeYan">
      <meta itemprop="description" content="天空中没有留下翅膀的痕迹，但我已飞过">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YCZ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/08/windows/windows-cmd/" class="post-title-link" itemprop="url">windows cmd</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-08 22:31:00" itemprop="dateCreated datePublished" datetime="2020-12-08T22:31:00+08:00">2020-12-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-02 10:16:49" itemprop="dateModified" datetime="2021-05-02T10:16:49+08:00">2021-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Windows/" itemprop="url" rel="index"><span itemprop="name">Windows</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="查看并解除端口占用"><a href="#查看并解除端口占用" class="headerlink" title="查看并解除端口占用"></a>查看并解除端口占用</h2><p>查看占用4000端口的进程：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">netstat</span> -ano<span class="token operator">|</span>findstr <span class="token string">"4000"</span>
</code></pre>
<p>停止进程，PID为LISTENING后的数字）</p>
<pre class=" language-bash"><code class="language-bash">taskkill /pid <span class="token string">"PID"</span> /F
</code></pre>
<p>如果出现：“无法终止 PID 为 xxx 的进程”，用管理员方式打开cmd，再次终止进程。</p>
<h2 id="打开防火墙端口"><a href="#打开防火墙端口" class="headerlink" title="打开防火墙端口"></a>打开防火墙端口</h2><p>在管理员模式下，打开2375端口，支持远程访问：</p>
<pre class=" language-bash"><code class="language-bash">netsh advfirewall firewall add rule name<span class="token operator">=</span><span class="token string">"docker_daemon"</span> dir<span class="token operator">=</span>in action<span class="token operator">=</span>allow protocol<span class="token operator">=</span>TCP localport<span class="token operator">=</span>2375
</code></pre>
<h2 id="无法访问github"><a href="#无法访问github" class="headerlink" title="无法访问github"></a>无法访问github</h2><p>能正常访问其他网站，却访问不了GitHub，怀疑是本地DNS解析出现问题。<br>访问：<a target="_blank" rel="noopener" href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net#ipinfo">fastly.net.ipaddress.com</a></p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/fastly.net.ip.png" alt="github.global.ssl.fastly.net 的ip"></p>
<p>访问：<a target="_blank" rel="noopener" href="https://github.com.ipaddress.com/#ipinfo">github 的ip</a></p>
<p><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/github.ip.png" alt="github 的ip"></p>
<p>打开C:\Windows\System32\drivers\etc\hosts，添加：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#github</span>
140.82.112.3  github.com
199.232.69.194 github.global.ssl.fastly.net   
</code></pre>
<p>然后在cmd中运行（可选）：</p>
<pre class=" language-bash"><code class="language-bash">ipconfig /flushdns 
</code></pre>
<h2 id="将文本中的unicode-编码转换称中文"><a href="#将文本中的unicode-编码转换称中文" class="headerlink" title="将文本中的unicode 编码转换称中文"></a>将文本中的unicode 编码转换称中文</h2><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36260974/article/details/106822180">一条指令将文件中的unicode编码转为中文</a></p>
<p>下图是文本中所含的Unicode码：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/unicodeTxt.png" alt="文本中含有Unicode码"><br>在文件所在目录cmd执行：</p>
<pre class=" language-bash"><code class="language-bash">native2ascii -reverse -encoding UTF-8 htmls1.json  htmls2.json
</code></pre>
<p>转换后的结果：<br><img src="https://github.com/ChangzeYan/ChangzeYan.github.io/raw/hexo/source/pic/unicodeTxt2Chinese.png" alt="将Unicode码转成中文"> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ChangzeYan</p>
  <div class="site-description" itemprop="description">天空中没有留下翅膀的痕迹，但我已飞过</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ChangzeYan</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
