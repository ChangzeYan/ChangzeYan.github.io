---
title: 安装镜像
author: ChangzeYan
date: 2021-01-04 18:35:42
tags: 镜像
categories: Docker
cover:
---

# Kafka
参考：[Docker快速搭建Kafka 1.x集群](https://www.jianshu.com/p/8ccd712e2599)
windows下，安装docker时默认安装了docker-compose，可以执行测试：
```bash
docker-compose -v
```

## 编写docker-compose.yml
```bash
version: '2'
services:
  zookeeper:
    image: "zookeeper"
    hostname: "zookeeper.local"
    container_name: "zookeeper"
    #设置网络别名
    networks:
      local:
        aliases:
          - "zookeeper.local"
  kafka:
    image: "wurstmeister/kafka"
    hostname: "kafka.local"
    container_name: "kafka"
    ports:
      - "9092:9092"
    networks:
      local:
        aliases:
          - "kafka.local"
    environment:
      KAFKA_ADVERTISED_HOST_NAME: kafka.local
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
#设置网络，名为local
networks:
  local:
    driver: bridge
```

## 启动
```bash
docker-compose up -d
```

## 进入容器
```bash
进入kafka容器
docker exec -it kafka /bin/bash
cd /opt/kafka_2.12-2.4.0/bin/
#创建topic
kafka-console-producer.sh --broker-list kafka:9092 --topic test

# 查看topic，localhost要改成zookeeper容器的名字
./kafka-topics.sh --list --zookeeper zookeeper:2181

#生产者生产消息
kafka-console-producer.sh --broker-list localhost:9092 --topic test

#消费topic
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test--from-beginning
```
